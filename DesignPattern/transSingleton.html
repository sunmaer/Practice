<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>透明单例模式</title>
</head>
<body>
	<script>
		// var Singleton = (function() {
		// 	var instance; // 保存实例
		// 	var Singleton = function(name) {
		// 		if(instance) {
		// 			return instance;
		// 		}
		// 		this.name = name;
		// 		return instance = this;
		// 	}
		// 	Singleton.prototype.getName = function() {
		// 		console.log(this.name);
		// 	}
 		// 	return Singleton;
		// })()

		// 用代理实现单例模式

		// 普通类 Singleton
		var Singleton = function(name) {
			this.name = name
		}
		Singleton.prototype.getName = function() {
			console.log(this.name)
		}

		// 代理类 proxySingleton
		var proxySingleton = (function() {
			var instance;
			var proxySingleton = function(name) {
				if(!instance) {
					instance = new Singleton(name)
				}
				return instance
			}
			return proxySingleton
		})()

		var a = new proxySingleton('sven1');
		var b = new proxySingleton('sven2');
		console.log(a.getName());
		console.log(b.getName());
		console.log(a === b);
	</script>
</body>
</html>
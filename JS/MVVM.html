<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>MVVM 框架原理</title>
</head>
<body>
	<script>
		// 1、实现 Observer
		let data = { name: 'sunmaer' }
		observe(data)
		data.name = 'sun'

		function observe(data) {
			if(!data || typeof data !== 'object') {
				return;
			}
			// 取出所有属性遍历
			Object.keys(data).forEach(function(key) {
				defineReactive(data, key, data[key])
			})
		}
		function defineReactive(data, key, val) {
			observe(val) // 递归监听子属性
			Object.defineProperty(data, key, {
				enumerable: true, // 可枚举
				configurable: false, // 不可再配置
				get: function() {
					return val
				},
				set: function(newVal) {
					console.log('监听值变化 '+val+'-->'+newVal)
					val = newVal
				}
			})
		}
	</script>
</body>
</html>